<?xml version="1.0"?>
<Containers>
  <Container version="2">
    <Name>politracker-ollama</Name>
    <Repository>ghcr.io/Kronborgs/politracker-ollama:latest</Repository>
    <Registry>https://ghcr.io</Registry>
    <Network>bridge</Network>
    <MyIP/>
    <Shell>sh</Shell>
    <Privileged>false</Privileged>
    <Support>https://github.com/Kronborgs/politracker</Support>
    <Project>https://github.com/Kronborgs/politracker</Project>
    <Overview>Ollama runtime til embeddings/LLM for politracker</Overview>
    <Category>AI:Machine Learning</Category>
    <WebUI>http://[IP]:[PORT:11434]</WebUI>
    <TemplateURL/>
    <Icon>https://raw.githubusercontent.com/ollama/ollama/main/docs/logo.png</Icon>
    <ExtraParams>--gpus=all</ExtraParams>
    <PostArgs/>
    <Config Name="Ollama Port" Target="11434" Default="11434" Mode="tcp" Description="Ollama API port" Type="Port" Display="always" Required="true" Mask="false">11434</Config>
    <Config Name="Ollama AppData" Target="/root/.ollama" Default="/mnt/user/appdata/politracker/ollama" Mode="rw" Description="Persistent model storage" Type="Path" Display="always" Required="true" Mask="false"/>
    <Config Name="EMBED_MODEL" Target="EMBED_MODEL" Default="nomic-embed-text" Mode="" Description="Embedding model pulled on startup" Type="Variable" Display="always" Required="true" Mask="false"/>
    <Config Name="LLM_MODEL" Target="LLM_MODEL" Default="qwen2.5:7b-instruct" Mode="" Description="LLM model pulled on startup" Type="Variable" Display="always" Required="true" Mask="false"/>
    <Config Name="PULL_ON_START" Target="PULL_ON_START" Default="true" Mode="" Description="Auto pull models when container starts" Type="Variable" Display="always" Required="true" Mask="false"/>
  </Container>

  <Container version="2">
    <Name>politracker-api</Name>
    <Repository>ghcr.io/Kronborgs/politracker-api:latest</Repository>
    <Registry>https://ghcr.io</Registry>
    <Network>bridge</Network>
    <MyIP/>
    <Shell>sh</Shell>
    <Privileged>false</Privileged>
    <Support>https://github.com/Kronborgs/politracker</Support>
    <Project>https://github.com/Kronborgs/politracker</Project>
    <Overview>Politracker API for statement ingestion/analyze</Overview>
    <Category>Network:Web</Category>
    <WebUI>http://[IP]:[PORT:8080]/health</WebUI>
    <TemplateURL/>
    <Icon>https://raw.githubusercontent.com/linuxserver/docker-templates/master/linuxserver.io/img/nginx-icon.png</Icon>
    <ExtraParams/>
    <PostArgs/>
    <Config Name="API Port" Target="8080" Default="8080" Mode="tcp" Description="API Port" Type="Port" Display="always" Required="true" Mask="false">8080</Config>
    <Config Name="AppData" Target="/app/apps/api/data" Default="/mnt/user/appdata/politracker/api" Mode="rw" Description="Persistent API data" Type="Path" Display="always" Required="true" Mask="false"/>
    <Config Name="DATABASE_URL" Target="DATABASE_URL" Default="postgres://postgres:postgres@postgres:5432/politracker" Mode="" Description="Postgres DSN" Type="Variable" Display="always" Required="true" Mask="false"/>
    <Config Name="QDRANT_URL" Target="QDRANT_URL" Default="http://qdrant:6333" Mode="" Description="Qdrant URL" Type="Variable" Display="always" Required="true" Mask="false"/>
    <Config Name="OLLAMA_URL" Target="OLLAMA_URL" Default="http://ollama:11434" Mode="" Description="Ollama URL" Type="Variable" Display="always" Required="true" Mask="false"/>
    <Config Name="JWT_SECRET" Target="JWT_SECRET" Default="change-me" Mode="" Description="JWT secret" Type="Variable" Display="always" Required="true" Mask="true"/>
    <Config Name="ADMIN_EMAIL" Target="ADMIN_EMAIL" Default="admin@politracker.local" Mode="" Description="Admin email" Type="Variable" Display="always" Required="true" Mask="false"/>
    <Config Name="ADMIN_PASSWORD" Target="ADMIN_PASSWORD" Default="change-me-strong" Mode="" Description="Admin password" Type="Variable" Display="always" Required="true" Mask="true"/>
  </Container>

  <Container version="2">
    <Name>politracker-web</Name>
    <Repository>ghcr.io/Kronborgs/politracker-web:latest</Repository>
    <Registry>https://ghcr.io</Registry>
    <Network>bridge</Network>
    <Shell>sh</Shell>
    <Privileged>false</Privileged>
    <Category>Network:Web</Category>
    <WebUI>http://[IP]:[PORT:3000]/</WebUI>
    <Overview>Politracker Next.js frontend</Overview>
    <Icon>https://raw.githubusercontent.com/linuxserver/docker-templates/master/linuxserver.io/img/nginx-icon.png</Icon>
    <ExtraParams/>
    <PostArgs/>
    <Config Name="Web Port" Target="3000" Default="3000" Mode="tcp" Description="Web Port" Type="Port" Display="always" Required="true" Mask="false">3000</Config>
    <Config Name="NEXT_PUBLIC_API_BASE_URL" Target="NEXT_PUBLIC_API_BASE_URL" Default="https://politracker.example.com/api" Mode="" Description="Public API URL" Type="Variable" Display="always" Required="true" Mask="false"/>
    <Config Name="API_INTERNAL_BASE_URL" Target="API_INTERNAL_BASE_URL" Default="http://politracker-api:8080" Mode="" Description="Internal API URL" Type="Variable" Display="always" Required="true" Mask="false"/>
    <Config Name="APP_VERSION" Target="APP_VERSION" Default="latest" Mode="" Description="Visible app version" Type="Variable" Display="advanced" Required="false" Mask="false"/>
    <Config Name="GIT_SHA" Target="GIT_SHA" Default="manual" Mode="" Description="Git sha metadata" Type="Variable" Display="advanced" Required="false" Mask="false"/>
    <Config Name="BUILD_TIME" Target="BUILD_TIME" Default="manual" Mode="" Description="Build timestamp metadata" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  </Container>
</Containers>
